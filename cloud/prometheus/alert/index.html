
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../basic/">
      
      
        <link rel="next" href="../prometheus.yml/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Prometheuså‘Šè­¦ - ğŸ“šé¢è¯•ç§˜ç±</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles/css/extra.css">
    
      <link rel="stylesheet" href="../../../styles/css/custom-toc.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prometheus" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../../.." title="ğŸ“šé¢è¯•ç§˜ç±" class="md-header__button md-logo" aria-label="ğŸ“šé¢è¯•ç§˜ç±" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ğŸ“šé¢è¯•ç§˜ç±
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prometheuså‘Šè­¦
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  ğŸ Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../maths/math/" class="md-tabs__link">
        
  
  
    
  
  ğŸµç¨‹åºå‘˜çš„æ•°å­¦

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../langs/python/basic/" class="md-tabs__link">
          
  
  
    
  
  ğŸ¦è¯­è¨€å¤§æœ¬è¥

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../algorithm/basic/" class="md-tabs__link">
          
  
  
    
  
  ğŸ¹ç®—æ³•å¤§æœ¬è¥

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../docker/docker/" class="md-tabs__link">
          
  
  
    
  
  ğŸºäº‘åŸç”Ÿ

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../analysis/numpy/" class="md-tabs__link">
          
  
  
    
  
  ğŸ¦§æ•°æ®åˆ†æå¤§è¥

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../machinelearning/scikit-learn/basic/" class="md-tabs__link">
          
  
  
    
  
  ğŸ´æœºå™¨å­¦ä¹ 

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../deeplearning/pytorch/tensor/" class="md-tabs__link">
          
  
  
    
  
  ğŸ£æ·±åº¦å­¦ä¹ 

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../llm/huggingface/pipeline/" class="md-tabs__link">
          
  
  
    
  
  ğŸ™å¤§æ¨¡å‹

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../llmapp/langchain/basic/" class="md-tabs__link">
          
  
  
    
  
  ğŸ å¤§æ¨¡å‹åº”ç”¨

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ğŸ“šé¢è¯•ç§˜ç±" class="md-nav__button md-logo" aria-label="ğŸ“šé¢è¯•ç§˜ç±" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ğŸ“šé¢è¯•ç§˜ç±
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ğŸ Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maths/math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ğŸµç¨‹åºå‘˜çš„æ•°å­¦
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../langs/python/basic/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ¦è¯­è¨€å¤§æœ¬è¥
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../algorithm/basic/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ¹ç®—æ³•å¤§æœ¬è¥
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    ğŸºäº‘åŸç”Ÿ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ğŸºäº‘åŸç”Ÿ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../k8s/k8s/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" checked>
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Prometheus
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Prometheus
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheusæ•™ç¨‹
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Prometheuså‘Šè­¦
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Prometheuså‘Šè­¦
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prometheus å‘Šè­¦è§„åˆ™é…ç½®
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-alertmanager" class="md-nav__link">
    <span class="md-ellipsis">
      2. Alertmanager é…ç½®
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. éƒ¨ç½²å’Œè¿è¡Œ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. é«˜çº§åŠŸèƒ½
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. å®Œæ•´å‘Šè­¦å¤„ç†æµç¨‹
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. å®è·µæ³¨æ„äº‹é¡¹
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      ç»“è®º
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus.yml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheusé…ç½®æ–‡ä»¶
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../promql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PromQL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../analysis/numpy/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ¦§æ•°æ®åˆ†æå¤§è¥
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../machinelearning/scikit-learn/basic/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ´æœºå™¨å­¦ä¹ 
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../deeplearning/pytorch/tensor/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ£æ·±åº¦å­¦ä¹ 
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../llm/huggingface/pipeline/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ™å¤§æ¨¡å‹
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../llmapp/langchain/basic/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ğŸ å¤§æ¨¡å‹åº”ç”¨
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prometheus å‘Šè­¦è§„åˆ™é…ç½®
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-alertmanager" class="md-nav__link">
    <span class="md-ellipsis">
      2. Alertmanager é…ç½®
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. éƒ¨ç½²å’Œè¿è¡Œ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. é«˜çº§åŠŸèƒ½
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. å®Œæ•´å‘Šè­¦å¤„ç†æµç¨‹
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. å®è·µæ³¨æ„äº‹é¡¹
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      ç»“è®º
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="prometheus">Prometheus å‘Šè­¦<a class="headerlink" href="#prometheus" title="Permanent link">&para;</a></h1>
<hr />
<p>Prometheus çš„å‘Šè­¦å¤„ç†ç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š<strong>å‘Šè­¦è§„åˆ™ (Alerting Rules)</strong> å’Œ <strong>Alertmanager</strong>ã€‚Prometheus é€šè¿‡å‘Šè­¦è§„åˆ™è§¦å‘å‘Šè­¦ï¼Œå°†å…¶å‘é€åˆ° Alertmanagerï¼ŒAlertmanager åˆ™è´Ÿè´£å¤„ç†å‘Šè­¦é€šçŸ¥çš„å‘é€ã€åˆ†ç»„ã€å»é‡ã€æŠ‘åˆ¶ç­‰æ“ä½œã€‚</p>
<p>ä¸‹é¢å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å‘Šè­¦é…ç½®ç¤ºä¾‹ï¼Œè¯¦ç»†è®²è§£ Prometheus å‘Šè­¦å¤„ç†çš„æµç¨‹ã€‚</p>
<h3 id="1-prometheus">1. Prometheus å‘Šè­¦è§„åˆ™é…ç½®<a class="headerlink" href="#1-prometheus" title="Permanent link">&para;</a></h3>
<p>Prometheus å‘Šè­¦è§„åˆ™ç”¨äºå®šä¹‰è§¦å‘å‘Šè­¦çš„æ¡ä»¶ï¼Œå‘Šè­¦è§„åˆ™ä¼šåŸºäº Prometheus çš„æ—¶é—´åºåˆ—æ•°æ®å®šæœŸè¿›è¡Œè¯„ä¼°ã€‚</p>
<h4 id="11">1.1 å‘Šè­¦è§„åˆ™ç¤ºä¾‹<a class="headerlink" href="#11" title="Permanent link">&para;</a></h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªéœ€æ±‚ï¼š
- å½“æŸä¸ªå®ä¾‹å®•æœºè¶…è¿‡ 5 åˆ†é’Ÿæ—¶è§¦å‘å‘Šè­¦ã€‚
- å½“æŸå®ä¾‹çš„ CPU ä½¿ç”¨ç‡è¶…è¿‡ 80% ä¸”æŒç»­ 2 åˆ†é’Ÿæ—¶è§¦å‘å‘Šè­¦ã€‚
- å½“æŸå®ä¾‹çš„å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡ 90% ä¸”æŒç»­ 5 åˆ†é’Ÿæ—¶è§¦å‘å‘Šè­¦ã€‚</p>
<p>å‘Šè­¦è§„åˆ™å¯ä»¥é…ç½®åœ¨ Prometheus çš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ <code>alert.rules.yml</code>ï¼š</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">groups</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example_alerts</span><span class="w">  </span><span class="c1"># å‘Šè­¦ç»„åç§°</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InstanceDown</span><span class="w">  </span><span class="c1"># å‘Šè­¦åç§°</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">up == 0</span><span class="w">  </span><span class="c1"># å‘Šè­¦è§¦å‘æ¡ä»¶</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m</span><span class="w">  </span><span class="c1"># å‘Šè­¦è§¦å‘å‰éœ€æŒç»­ 5 åˆ†é’Ÿ</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">critical</span><span class="w">  </span><span class="c1"># å‘Šè­¦æ ‡ç­¾ï¼Œè¡¨ç¤ºä¸¥é‡æ€§</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Instance</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">down&quot;</span><span class="w">  </span><span class="c1"># ç®€è¦æè¿°</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Instance</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">down</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">minutes.&quot;</span><span class="w">  </span><span class="c1"># è¯¦ç»†æè¿°</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HighCpuUsage</span><span class="w">  </span><span class="c1"># å‘Šè­¦åç§°</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum(rate(node_cpu_seconds_total{mode!=&quot;idle&quot;}[5m])) by (instance) &gt; 0.8</span><span class="w">  </span><span class="c1"># å‘Šè­¦æ¡ä»¶</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2m</span><span class="w">  </span><span class="c1"># æ¡ä»¶éœ€æ»¡è¶³ 2 åˆ†é’Ÿ</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warning</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;High</span><span class="nv"> </span><span class="s">CPU</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CPU</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">instance</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">80%</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">minutes.&quot;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HighMemoryUsage</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_memory_Active_bytes / node_memory_MemTotal_bytes &gt; 0.9</span><span class="w">  </span><span class="c1"># å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡ 90%</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warning</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;High</span><span class="nv"> </span><span class="s">memory</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Memory</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">instance</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.instance</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">90%</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">minutes.&quot;</span>
</span></code></pre></div>
<h4 id="12">1.2 å‘Šè­¦è§„åˆ™å­—æ®µè§£é‡Š<a class="headerlink" href="#12" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>alert</strong>ï¼šå‘Šè­¦çš„åç§°ã€‚</li>
<li><strong>expr</strong>ï¼šä½¿ç”¨ PromQL è¡¨è¾¾å¼å®šä¹‰å‘Šè­¦æ¡ä»¶ã€‚</li>
<li><strong>for</strong>ï¼šæ¡ä»¶éœ€è¦æŒç»­å¤šé•¿æ—¶é—´æ‰ä¼šè§¦å‘å‘Šè­¦ã€‚</li>
<li><strong>labels</strong>ï¼šç”¨äºå¯¹å‘Šè­¦æ‰“æ ‡ç­¾ï¼ˆå¦‚ <code>severity</code> è¡¨ç¤ºå‘Šè­¦ä¸¥é‡æ€§ï¼‰ã€‚</li>
<li><strong>annotations</strong>ï¼šé™„åŠ çš„å‘Šè­¦æè¿°ä¿¡æ¯ï¼Œé€šå¸¸ç”¨äºç”Ÿæˆå‘Šè­¦é€šçŸ¥ã€‚</li>
</ul>
<h4 id="13">1.3 å¼•ç”¨å‘Šè­¦è§„åˆ™<a class="headerlink" href="#13" title="Permanent link">&para;</a></h4>
<p>éœ€è¦åœ¨ Prometheus çš„ä¸»é…ç½®æ–‡ä»¶ <code>prometheus.yml</code> ä¸­å¼•ç”¨å‘Šè­¦è§„åˆ™æ–‡ä»¶ï¼š</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">rule_files</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;alert.rules.yml&#39;</span>
</span></code></pre></div>
<h3 id="2-alertmanager">2. Alertmanager é…ç½®<a class="headerlink" href="#2-alertmanager" title="Permanent link">&para;</a></h3>
<p>Alertmanager è´Ÿè´£æ¥æ”¶ Prometheus å‘å‡ºçš„å‘Šè­¦ï¼Œå¹¶æ ¹æ®é¢„è®¾è§„åˆ™å¤„ç†å‘Šè­¦é€šçŸ¥ã€‚ä½ å¯ä»¥ä¸ºä¸åŒçš„å‘Šè­¦å®šä¹‰ä¸åŒçš„é€šçŸ¥æ–¹å¼å’Œæ¥æ”¶è€…ã€‚</p>
<h4 id="21-alertmanager">2.1 Alertmanager é…ç½®ç¤ºä¾‹<a class="headerlink" href="#21-alertmanager" title="Permanent link">&para;</a></h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ <code>alertmanager.yml</code> é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ŒåŒ…å«é‚®ä»¶å’Œ Slack ä¸¤ç§é€šçŸ¥æ¸ é“ã€‚</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">global</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">resolve_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m</span><span class="w">  </span><span class="c1"># å‘Šè­¦è§£å†³çš„è¶…æ—¶æ—¶é—´</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nt">route</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">receiver</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span><span class="w">  </span><span class="c1"># é»˜è®¤æ¥æ”¶å™¨</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alertname&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;instance&#39;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># å‘Šè­¦åˆ†ç»„ä¾æ®</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="nt">group_wait</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span><span class="w">  </span><span class="c1"># ç¬¬ä¸€æ¬¡é€šçŸ¥å‰çš„ç­‰å¾…æ—¶é—´</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span><span class="nt">group_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m</span><span class="w">  </span><span class="c1"># ç»„å†…å‘Šè­¦å‘é€çš„æœ€å°é—´éš”æ—¶é—´</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span><span class="nt">repeat_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span><span class="w">  </span><span class="c1"># ç›¸åŒå‘Šè­¦é‡å¤å‘é€çš„æœ€å°é—´éš”æ—¶é—´</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">  </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">match</span><span class="p">:</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">critical</span><span class="w">  </span><span class="c1"># åŒ¹é…å‘Šè­¦ä¸¥é‡æ€§ä¸º critical</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">      </span><span class="nt">receiver</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;critical-team&#39;</span><span class="w">  </span><span class="c1"># å°†ä¸¥é‡å‘Šè­¦å‘é€åˆ°ç‰¹å®šæ¥æ”¶è€…</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">match</span><span class="p">:</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">        </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warning</span><span class="w">  </span><span class="c1"># åŒ¹é…å‘Šè­¦ä¸¥é‡æ€§ä¸º warning</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">      </span><span class="nt">receiver</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;warning-team&#39;</span><span class="w">  </span><span class="c1"># å°† warning å‘Šè­¦å‘é€åˆ°å¦ä¸€ä¸ªæ¥æ”¶è€…</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="nt">receivers</span><span class="p">:</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="nt">email_configs</span><span class="p">:</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;admin@example.com&#39;</span><span class="w">  </span><span class="c1"># é»˜è®¤å‘Šè­¦æ¥æ”¶è€…é‚®ç®±</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;alertmanager@example.com&#39;</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="nt">smarthost</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;smtp.example.com:587&#39;</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">        </span><span class="nt">auth_username</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;alertmanager@example.com&#39;</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">        </span><span class="nt">auth_password</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password&#39;</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;critical-team&#39;</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">    </span><span class="nt">slack_configs</span><span class="p">:</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">api_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://hooks.slack.com/services/T000/B000/XXXX&#39;</span><span class="w">  </span><span class="c1"># Slack Webhook URL</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">        </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#critical-alerts&#39;</span><span class="w">  </span><span class="c1"># Slack é¢‘é“</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;warning-team&#39;</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">    </span><span class="nt">slack_configs</span><span class="p">:</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">api_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://hooks.slack.com/services/T000/B000/YYYY&#39;</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="w">        </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#warning-alerts&#39;</span>
</span></code></pre></div>
<h4 id="22">2.2 å…³é”®å­—æ®µè§£é‡Š<a class="headerlink" href="#22" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>global</strong>ï¼šå…¨å±€é…ç½®ï¼ŒåŒ…å«å‘Šè­¦çš„è¶…æ—¶ç­‰è®¾ç½®ã€‚</li>
<li><strong>route</strong>ï¼šå‘Šè­¦è·¯ç”±è§„åˆ™ï¼Œå†³å®šå¦‚ä½•å‘é€å‘Šè­¦åŠå…¶åˆ†ç»„æ–¹å¼ã€‚</li>
<li><strong>routes</strong>ï¼šå®šä¹‰å­è·¯ç”±ï¼Œæ ¹æ®å‘Šè­¦çš„æ ‡ç­¾åŒ¹é…ä¸åŒçš„æ¥æ”¶å™¨ã€‚ä¾‹å¦‚ï¼Œ<code>severity</code> ä¸º <code>critical</code> çš„å‘Šè­¦å¯ä»¥å‘é€åˆ°æŒ‡å®šå›¢é˜Ÿã€‚</li>
<li><strong>receivers</strong>ï¼šå®šä¹‰æ¥æ”¶å‘Šè­¦çš„ç›®æ ‡ï¼Œå¯ä»¥é…ç½®å¤šä¸ªæ¥æ”¶å™¨ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶ã€Slack ç­‰ã€‚</li>
</ul>
<h4 id="23">2.3 é…ç½®å¤šä¸ªæ¥æ”¶æ¸ é“<a class="headerlink" href="#23" title="Permanent link">&para;</a></h4>
<p>é™¤äº†é‚®ä»¶ï¼ŒAlertmanager è¿˜æ”¯æŒå…¶ä»–æ¸ é“ï¼Œæ¯”å¦‚ Slackã€PagerDutyã€Webhook ç­‰ã€‚ä½ å¯ä»¥åœ¨ <code>receivers</code> ä¸­æ ¹æ®éœ€è¦æ·»åŠ å¤šç§æ¥æ”¶æ–¹å¼ã€‚</p>
<h3 id="3">3. éƒ¨ç½²å’Œè¿è¡Œ<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<h4 id="31-prometheus">3.1 å¯åŠ¨ Prometheus<a class="headerlink" href="#31-prometheus" title="Permanent link">&para;</a></h4>
<p>ç¡®ä¿ Prometheus çš„é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨äº†å‘Šè­¦è§„åˆ™æ–‡ä»¶ï¼Œå¹¶å¯åŠ¨ Prometheusï¼š</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>./prometheus<span class="w"> </span>--config.file<span class="o">=</span>prometheus.yml
</span></code></pre></div>
<h4 id="32-alertmanager">3.2 å¯åŠ¨ Alertmanager<a class="headerlink" href="#32-alertmanager" title="Permanent link">&para;</a></h4>
<p>ç¡®ä¿ <code>alertmanager.yml</code> é…ç½®æ­£ç¡®ï¼Œå¹¶å¯åŠ¨ Alertmanagerï¼š</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>./alertmanager<span class="w"> </span>--config.file<span class="o">=</span>alertmanager.yml
</span></code></pre></div>
<h3 id="4">4. é«˜çº§åŠŸèƒ½<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<h4 id="41-silencing">4.1 å‘Šè­¦æŠ‘åˆ¶ï¼ˆSilencingï¼‰<a class="headerlink" href="#41-silencing" title="Permanent link">&para;</a></h4>
<p>å‘Šè­¦æŠ‘åˆ¶ç”¨äºåœ¨ç‰¹å®šæ—¶é—´æ®µå†…ï¼ˆä¾‹å¦‚ç»´æŠ¤æœŸé—´ï¼‰é™é»˜å‘Šè­¦ï¼Œé¿å…æ”¶åˆ°ä¸å¿…è¦çš„å‘Šè­¦é€šçŸ¥ã€‚ä½ å¯ä»¥åœ¨ Alertmanager çš„ UI ä¸­æ‰‹åŠ¨æ·»åŠ é™é»˜è§„åˆ™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ API åŠ¨æ€åˆ›å»ºã€‚</p>
<p>é€šè¿‡ API åˆ›å»ºé™é»˜è§„åˆ™çš„ç¤ºä¾‹ï¼š</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>curl<span class="w"> </span>-XPOST<span class="w"> </span><span class="s2">&quot;http://alertmanager/api/v1/silences&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="s1">  &quot;matchers&quot;: [{&quot;name&quot;: &quot;instance&quot;, &quot;value&quot;: &quot;web-server-01&quot;}],</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="s1">  &quot;startsAt&quot;: &quot;2024-09-24T10:00:00Z&quot;,</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="s1">  &quot;endsAt&quot;: &quot;2024-09-24T12:00:00Z&quot;,</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="s1">  &quot;createdBy&quot;: &quot;admin&quot;,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="s1">  &quot;comment&quot;: &quot;Scheduled maintenance&quot;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="s1">}&#39;</span>
</span></code></pre></div>
<h4 id="42">4.2 å‘Šè­¦åˆ†ç»„ä¸å»é‡<a class="headerlink" href="#42" title="Permanent link">&para;</a></h4>
<p>Alertmanager æ”¯æŒå‘Šè­¦çš„åˆ†ç»„ä¸å»é‡ã€‚åœ¨ <code>route</code> ä¸­çš„ <code>group_by</code> å­—æ®µå®šä¹‰å‘Šè­¦çš„åˆ†ç»„ä¾æ®ã€‚ä¾‹å¦‚ï¼ŒæŒ‰ <code>alertname</code> å’Œ <code>instance</code> è¿›è¡Œåˆ†ç»„æ—¶ï¼ŒåŒç±»å‘Šè­¦å°†åˆå¹¶ä¸ºä¸€ä¸ªé€šçŸ¥ï¼Œä»¥å‡å°‘é€šçŸ¥æ¬¡æ•°ã€‚å»é‡åŠŸèƒ½ç¡®ä¿ç›¸åŒçš„å‘Šè­¦ä¸ä¼šè¢«å¤šæ¬¡é€šçŸ¥ã€‚</p>
<h3 id="5">5. å®Œæ•´å‘Šè­¦å¤„ç†æµç¨‹<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Prometheus è§¦å‘å‘Šè­¦</strong>ï¼šPrometheus æ ¹æ®å®šä¹‰çš„å‘Šè­¦è§„åˆ™å®šæœŸè¯„ä¼°æŒ‡æ ‡æ•°æ®ã€‚å½“å‘Šè­¦æ¡ä»¶æ»¡è¶³æ—¶ï¼ŒPrometheus ä¼šç”Ÿæˆå‘Šè­¦ï¼Œå¹¶å°†å‘Šè­¦ä¿¡æ¯å‘é€ç»™ Alertmanagerã€‚</p>
</li>
<li>
<p><strong>Alertmanager å¤„ç†å‘Šè­¦</strong>ï¼š</p>
<ul>
<li><strong>å»é‡</strong>ï¼šAlertmanager å¯¹é‡å¤çš„å‘Šè­¦è¿›è¡Œå»é‡ã€‚</li>
<li><strong>åˆ†ç»„</strong>ï¼šæ ¹æ®é…ç½®ï¼Œå°†ç›¸ä¼¼çš„å‘Šè­¦è¿›è¡Œåˆ†ç»„ã€‚</li>
<li><strong>æŠ‘åˆ¶</strong>ï¼šæ ¹æ®é™é»˜è§„åˆ™ï¼ŒæŠ‘åˆ¶ä¸å¿…è¦çš„å‘Šè­¦ã€‚</li>
<li><strong>å‘é€é€šçŸ¥</strong>ï¼šæ ¹æ®è·¯ç”±è§„åˆ™ï¼ŒAlertmanager å°†å‘Šè­¦å‘é€åˆ°é¢„å®šä¹‰çš„æ¥æ”¶è€…ï¼ˆå¦‚é‚®ä»¶ã€Slack ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‘Šè­¦æ¢å¤</strong>ï¼šå½“é—®é¢˜è§£å†³æ—¶ï¼ŒPrometheus ä¼šè‡ªåŠ¨æ›´æ–°å‘Šè­¦çŠ¶æ€ï¼ŒAlertmanager å°†å‘Šè­¦æ¢å¤ä¿¡æ¯å‘é€ç»™ç›¸å…³æ¥æ”¶è€…ã€‚</p>
</li>
</ol>
<h3 id="6">6. å®è·µæ³¨æ„äº‹é¡¹<a class="headerlink" href="#6" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>å‘Šè­¦è§„åˆ™è®¾è®¡</strong>ï¼šè®¾è®¡å‘Šè­¦è§„åˆ™æ—¶ï¼Œå°½é‡é¿å…å‘Šè­¦é£æš´ã€‚åº”é€‚å½“ä½¿ç”¨ <code>for</code> ç¡®ä¿çŸ­æš‚çš„æŒ‡æ ‡æ³¢åŠ¨ä¸ä¼šè§¦å‘å‘Šè­¦ã€‚</li>
<li><strong>é™é»˜ç­–ç•¥</strong>ï¼šåœ¨è¿›è¡Œè®¡åˆ’å†…ç»´æŠ¤æˆ–å¤§è§„æ¨¡éƒ¨ç½²æ—¶ï¼Œå¯ä»¥æå‰è®¾ç½®é™é»˜è§„åˆ™ï¼Œé¿å…æ”¶åˆ°å¤§é‡æ— ç”¨çš„å‘Šè­¦ã€‚</li>
<li><strong>å¤šæ¸ é“å‘Šè­¦</strong>ï¼šå¯¹äºé‡è¦çš„å‘Šè­¦ï¼Œå»ºè®®é…ç½®å¤šæ¸ é“é€šçŸ¥ï¼ˆå¦‚é‚®ä»¶ã€çŸ­ä¿¡ã€å³æ—¶é€šè®¯å·¥å…·ï¼‰ï¼Œä»¥ç¡®ä¿å‘Šè­¦ä¿¡æ¯èƒ½å¤ŸåŠæ—¶è¢«å¤„ç†ã€‚</li>
</ul>
<h3 id="_1">ç»“è®º<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>é€šè¿‡é…ç½® Prometheus çš„å‘Šè­¦è§„åˆ™å’Œ Alertmanagerï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸ªå¼ºå¤§çš„å‘Šè­¦ç³»ç»Ÿï¼Œå¸®åŠ©åŠæ—¶ç›‘æ§æœåŠ¡çŠ¶æ€å¹¶å¤„ç†å„ç§å¼‚å¸¸ã€‚</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.tabs.link", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "search.suggest", "navigation.path", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../styles/js/tablesort.min.js"></script>
      
        <script src="../../../styles/js/tex-mml-chtml.js"></script>
      
    
  </body>
</html>